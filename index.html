<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì˜¤ëŠ˜ì˜ ìš´ì„¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* ===== ì „ì²´ ê³µí†µ ìŠ¤íƒ€ì¼ (ëª¨ë°”ì¼ ìš°ì„ ) ===== */
    :root {
      --neon-lime: #c7ff2e;
      --black: #111111;
      --text-main: #222222;
      --text-sub: #555555;
      --card-bg: #ffffff;
      --badge-bg: #f4f4f4;
      --accent: #00bf6f;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
      background: var(--neon-lime);
      color: var(--text-main);
    }

    .wrap {
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
      padding: 16px 16px 96px;
      position: relative;
    }

    /* ===== í—¤ë”/ë¸Œëœë“œ ì˜ì—­ ===== */
    .top-bar {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      margin-bottom: 16px;
      font-size: 0.8rem;
      font-weight: 500;
    }
    .brand {
      font-weight: 800;
      letter-spacing: 0.02em;
    }

    /* ===== íˆì–´ë¡œ ì˜ì—­ ===== */
    .hero {
      text-align: center;
      margin-top: 8px;
      margin-bottom: 24px;
    }
    .hero-title {
      font-size: 1.4rem;
      font-weight: 700;
      line-height: 1.4;
      margin-bottom: 16px;
    }
    .clover {
      font-size: 80px;
      line-height: 1;
      margin-bottom: 8px;
    }
    .hero-sub {
      font-size: 0.9rem;
      color: #333;
    }

    /* ===== ì¹´ë“œ ê³µí†µ ===== */
    .card {
      background: var(--card-bg);
      border-radius: 18px;
      padding: 18px 16px 16px;
      box-shadow: 0 8px 18px rgba(0,0,0,0.08);
      margin-bottom: 18px;
    }

    /* ì…ë ¥ ìŠ¤íƒ€ì¼ */
    input, select {
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid #ddd;
      background: #fafafa;
      font-size: 0.9rem;
    }

    /* ===== ê²°ê³¼ ì¹´ë“œ ===== */
    .result { display: none; margin-top: 8px; }
    .result-card {
      background: #fff;
      border-radius: 18px;
      padding: 18px 16px 20px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.12);
      margin-bottom: 16px;
    }

    .badge-row {
      display: flex;
      gap: 8px;
      margin-top: 14px;
    }
    .badge {
      flex: 1;
      background: var(--badge-bg);
      border-radius: 12px;
      padding: 8px 10px;
      text-align: center;
      font-size: 0.85rem;
    }
    .badge-value { font-size: 1rem; font-weight: 700; }

    /* ì„¸ë¶€ ë¸”ë¡ */
    .section {
      background: #fff;
      border-radius: 18px;
      padding: 14px;
      box-shadow: 0 6px 14px rgba(0,0,0,0.06);
      margin-bottom: 10px;
      font-size: 0.9rem;
      line-height: 1.5;
    }

    /* í•˜ë‹¨ ë²„íŠ¼ */
    .bottom-bar {
      position: fixed;
      left: 0; right: 0; bottom: 0;
      padding: 10px 16px 18px;
      background: linear-gradient(to top, rgba(0,0,0,0.28), transparent);
      pointer-events: none;
    }
    .bottom-inner { max-width: 480px; margin: 0 auto; pointer-events: auto; }
    .main-btn {
      width: 100%;
      background: #000;
      color: #fff;
      padding: 14px;
      font-size: 1rem;
      border-radius: 999px;
      border: none;
      cursor: pointer;
    }
  </style>
</head>

<body>
<div class="wrap">

  <!-- í—¤ë” -->
  <header class="top-bar">
    <div class="brand">IfNewWorld</div>
  </header>

  <!-- íˆì–´ë¡œ -->
  <section class="hero">
    <div class="hero-title"><span id="heroNamePrefix"></span>ì˜¤ëŠ˜ë„ í–‰ìš´ì´ ê°€ë“í•˜ê¸¸!</div>
    <div class="clover">ğŸ€</div>
    <div class="hero-sub">ê°„ë‹¨í•œ ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´ ì˜¤ëŠ˜ì˜ ìš´ì„¸ë¥¼ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</div>
  </section>

  <!-- ì…ë ¥ ì¹´ë“œ -->
  <section class="card">
    <label>ì´ë¦„</label>
    <input id="name" placeholder="ì˜ˆ: ì§€í˜œë¹ˆ" />

    <label style="margin-top:10px;">ì„±ë³„</label>
    <select id="gender">
      <option value="">ì„ íƒí•˜ì„¸ìš”</option>
      <option value="male">ë‚¨ì„±</option>
      <option value="female">ì—¬ì„±</option>
      <option value="other">ê¸°íƒ€</option>
    </select>

    <label style="margin-top:10px;">ìƒë…„ì›”ì¼</label>
    <div style="display:flex; gap:8px;">
      <select id="birthYear"><option value="">ì—°ë„</option></select>
      <select id="birthMonth"><option value="">ì›”</option></select>
      <select id="birthDay"><option value="">ì¼</option></select>
    </div>

    <label style="margin-top:10px;">íƒœì–´ë‚œ ì‹œê°„</label>
    <select id="birthTime">
      <option value="">ëª¨ë¦„ / ê¸°ì–µ ì•ˆ ë‚¨</option>
      <option value="0">00ì‹œ</option><option value="1">01ì‹œ</option>
      <option value="2">02ì‹œ</option><option value="3">03ì‹œ</option>
      <option value="4">04ì‹œ</option><option value="5">05ì‹œ</option>
      <option value="6">06ì‹œ</option><option value="7">07ì‹œ</option>
      <option value="8">08ì‹œ</option><option value="9">09ì‹œ</option>
      <option value="10">10ì‹œ</option><option value="11">11ì‹œ</option>
      <option value="12">12ì‹œ</option><option value="13">13ì‹œ</option>
      <option value="14">14ì‹œ</option><option value="15">15ì‹œ</option>
      <option value="16">16ì‹œ</option><option value="17">17ì‹œ</option>
      <option value="18">18ì‹œ</option><option value="19">19ì‹œ</option>
      <option value="20">20ì‹œ</option><option value="21">21ì‹œ</option>
      <option value="22">22ì‹œ</option><option value="23">23ì‹œ</option>
    </select>

    <div id="error" style="color:#e53935; font-size:0.8rem; margin-top:6px;"></div>
  </section>

  <!-- ê²°ê³¼ ì˜ì—­ -->
  <section class="result" id="resultSection">

    <div class="result-card">
      <div id="todayText" style="font-size:0.83rem; color:#555; margin-bottom:6px;"></div>
      <div id="resultTitle" style="font-size:1.1rem; font-weight:700; margin-bottom:10px;"></div>
      <div id="resultIntro" style="color:#555; margin-bottom:14px; line-height:1.5;"></div>

      <div class="badge-row">
        <div class="badge">
          <span class="badge-title">ì˜¤ëŠ˜ì˜ ì ìˆ˜</span>
          <span class="badge-value" id="scoreBadge"></span>
        </div>
        <div class="badge">
          <span class="badge-title">í–‰ìš´ì˜ ìˆ«ì</span>
          <span class="badge-value" id="luckyBadge"></span>
        </div>
        <div class="badge">
          <span class="badge-title">ì¶”ì²œ ìƒ‰ìƒ</span>
          <span class="badge-value" id="colorBadge"></span>
        </div>
      </div>
    </div>

    <div id="sectionContainer"></div>

    <div style="text-align:center; font-size:0.75rem; color:#444; opacity:0.8; margin-top:10px;">
      ë³¸ ìš´ì„¸ëŠ” ì˜¤ë½ ë° ìê¸° ì„±ì°° ì°¸ê³ ìš©ì…ë‹ˆë‹¤.
    </div>
  </section>
</div>

<!-- í•˜ë‹¨ ë²„íŠ¼ -->
<div class="bottom-bar">
  <div class="bottom-inner">
    <button class="main-btn" id="seeFortuneBtn">ì˜¤ëŠ˜ì˜ ìš´ì„¸ ë³´ê¸°</button>
  </div>
</div>

<script>
/* ================================================
   ë‚ ì§œ í¬ë§·
================================================= */
function formatToday() {
  const w = ["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "];
  const n = new Date();
  return `${n.getFullYear()}ë…„ ${n.getMonth()+1}ì›” ${n.getDate()}ì¼ ${w[n.getDay()]}ìš”ì¼`;
}

/* ================================================
   ìš´ì„¸ ë¬¸ì¥ ë°ì´í„° (30ì¢… â†’ ì¡°í•© ë°©ì‹)
================================================= */

/* ë©”ì¸ ë©”ì‹œì§€ + ë ˆë²¨ */
const mainMessages = [
  ["ì˜¤ëŠ˜ì€ ìƒê°ë³´ë‹¤ ì¼ë“¤ì´ ë§¤ë„ëŸ½ê²Œ í’€ë¦¬ëŠ” íë¦„ì…ë‹ˆë‹¤.", 2],
  ["ë§ˆìŒì´ ê°€ë²¼ì›Œì§€ê³  ìƒˆë¡œìš´ ì˜ê°ì´ ë– ì˜¤ë¥´ê¸° ì‰¬ìš´ ë‚ ì…ë‹ˆë‹¤.", 2],
  ["ì£¼ë³€ì˜ ê¸°ëŒ€ë³´ë‹¤ ìŠ¤ìŠ¤ë¡œì˜ í˜ì´ ë” í¬ê²Œ ë°œíœ˜ë˜ëŠ” ì‹œì ì…ë‹ˆë‹¤.", 2],
  ["ì§‘ì¤‘ë ¥ì´ ìƒìŠ¹í•˜ë©° ì„±ê³¼ë¥¼ ë‚´ê¸° ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤.", 2],
  ["ê°ì •ì˜ ê· í˜•ì´ ì˜ ì¡í˜€ ì°¨ë¶„í•˜ê²Œ ìƒí™©ì„ íŒë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.", 1],
  ["ì˜ˆìƒì¹˜ ëª»í•œ ê¸°íšŒê°€ ìì—°ìŠ¤ëŸ½ê²Œ ë‹¤ê°€ì˜¬ ìˆ˜ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤.", 1],
  ["ê´€ê³„ ìš´ì´ ì¢‹ì•„ ì†Œí†µì—ì„œ ì¢‹ì€ ê²°ê³¼ë¥¼ ê¸°ëŒ€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.", 1],
  ["í‰ì†Œë³´ë‹¤ í–‰ë™ë ¥ì´ ë†’ì•„ì§€ëŠ” ë‚ ì…ë‹ˆë‹¤.", 1],
  ["ì±…ì„ê°ì´ ë¶€ê°ë˜ë©° ì‹ ë¢°ë¥¼ ë°›ê¸° ì¢‹ì€ ìš´ì…ë‹ˆë‹¤.", 2],
  ["ì‘ì€ ì‹œë„ë§Œìœ¼ë¡œë„ í° ê²°ê³¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤.", 2],
];

/* í–‰ë™ ì¡°ì–¸ */
const actionTips = [
  "ì˜¤ëŠ˜ì€ í•´ì•¼ í•  ì¼ì„ ìš°ì„ ìˆœìœ„ë¡œ ì •ë¦¬í•˜ê³  ë¹ ë¥´ê²Œ ì‹¤í–‰í•´ ë³´ì„¸ìš”.",
  "ì‘ì€ ì¼ë¶€í„° ì²˜ë¦¬í•˜ë©´ ì „ì²´ íë¦„ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤.",
  "ìƒˆë¡œìš´ ê²°ì •ì„ ë‚´ë¦¬ê¸° ì¢‹ì€ íƒ€ì´ë°ì…ë‹ˆë‹¤.",
  "ê³¼ê°í•˜ê²Œ ì˜ê²¬ì„ í‘œí˜„í•´ë³´ë©´ í˜¸ì‘ì´ ì¢‹ìŠµë‹ˆë‹¤.",
  "ì •ë¦¬Â·ì •ëˆë§Œ í•´ë„ ì§‘ì¤‘ë ¥ì´ ì‚´ì•„ë‚©ë‹ˆë‹¤.",
  "ì§§ì€ íœ´ì‹ì´ ì»¨ë””ì…˜ì„ ì§€ì¼œì¤ë‹ˆë‹¤.",
  "í˜‘ì—… ìš´ì´ ì¢‹ì•„ ë„ì›€ì„ ì–»ê¸° ì¢‹ìŠµë‹ˆë‹¤.",
  "ê°€ë²¼ìš´ ìš´ë™ì´ ì—ë„ˆì§€ ìˆœí™˜ì— ë„ì›€ì´ ë©ë‹ˆë‹¤.",
  "ìƒˆë¡œìš´ ì •ë³´ë¥¼ ë°°ìš°ê¸° ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤.",
  "ì˜¤ëŠ˜ ì‹œì‘í•˜ëŠ” ìŠµê´€ì´ ì¥ê¸°ì ìœ¼ë¡œ ì´ë“ì´ ë©ë‹ˆë‹¤."
];

/* ì£¼ì˜ ë¬¸ì¥ */
const warnings = [
  "ë‹¤ë§Œ ë„ˆë¬´ ë§ì€ ì¼ì„ í•œ ë²ˆì— ì²˜ë¦¬í•˜ë ¤ í•˜ì§€ ë§ˆì„¸ìš”.",
  "ì†ë„ë¥¼ ì§€ë‚˜ì¹˜ê²Œ ì˜¬ë¦¬ë©´ ì‹¤ìˆ˜ê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
  "ì£¼ë³€ ì˜ê²¬ì— ê³¼í•˜ê²Œ í”ë“¤ë¦¬ì§€ ì•Šë„ë¡ ì¤‘ì‹¬ì„ ì¡ìœ¼ì„¸ìš”.",
  "ë§íˆ¬ì— ì˜ˆë¯¼í•´ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ ì°¨ë¶„í•˜ê²Œ ëŒ€í™”í•˜ì„¸ìš”.",
  "ì˜¤ëŠ˜ì€ ê³¼í•œ ì§€ì¶œì€ í”¼í•˜ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤.",
  "ë¹„êµì‹¬ì´ ìƒê¸°ê¸° ì‰¬ìš´ ë‚ ì´ë‹ˆ ìì‹ ì˜ í˜ì´ìŠ¤ì— ì§‘ì¤‘í•˜ì„¸ìš”.",
  "ì™„ë²½ì£¼ì˜ëŠ” ì§„í–‰ì„ ëŠ¦ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
  "ì¦‰í¥ì  ê²°ì •ì€ í•œ ë²ˆ ë” ì ê²€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.",
  "ì‘ì€ ì‹¤ìˆ˜ì—ë„ ê´€ëŒ€í•¨ì´ í•„ìš”í•©ë‹ˆë‹¤.",
  "í° ëª©í‘œë³´ë‹¤ ì§€ê¸ˆ ê°€ëŠ¥í•œ ì¼ë¶€í„° ì§„í–‰í•˜ì„¸ìš”."
];

/* ì¶”ì²œ ìƒ‰ìƒ */
const colors = [
  "ì°¨ë¶„í•œ ë² ì´ì§€", "í¬ë ˆìŠ¤íŠ¸ ê·¸ë¦°", "ë¼ì´íŠ¸ í¼í”Œ",
  "ì•„ì´ë³´ë¦¬", "ì„ ì…‹ ì˜¤ë Œì§€", "ìŠ¤ì¹´ì´ ë¸”ë£¨",
  "ë¨¸ìŠ¤íƒ€ë“œ ì˜ë¡œ", "ì½”ë„ í•‘í¬"
];

/* ================================================
   ìƒ‰ìƒ ì¤„ë°”ê¿ˆ: ë„ì–´ì“°ê¸° ìˆìœ¼ë©´ ë§ˆì§€ë§‰ ë‹¨ì–´ ì•„ë˜ ì¤„
================================================= */
function formatColorLabel(name) {
  if (name.includes(" ")) {
    const parts = name.split(" ");
    const last = parts.pop();
    return parts.join(" ") + "<br>" + last;
  }
  return name.length > 4
    ? name.slice(0, -2) + "<br>" + name.slice(-2)
    : name;
}

/* ================================================
   ì ìˆ˜ ê³„ì‚°: ë©”ì‹œì§€ í†¤ + ê²½ê³  ê°•ë„ ê¸°ë°˜
================================================= */
function calcScore(level, warnIdx) {
  let min, max;

  if (level === 2) { min = 82; max = 97; }
  else if (level === 1) { min = 72; max = 90; }
  else { min = 62; max = 82; }

  const penalty = (warnIdx % 3) * 2;
  const raw = Math.floor(Math.random() * (max - min + 1)) + min - penalty;

  return Math.max(60, Math.min(raw, 99));
}

/* ================================================
   í–‰ìš´ì˜ ìˆ«ì: ì ìˆ˜ê°€ ë†’ì„ìˆ˜ë¡ í° ìˆ«ì
================================================= */
function calcLucky(score) {
  if (score >= 90) return Math.floor(Math.random()*3)+8;   // 8~10
  if (score >= 80) return Math.floor(Math.random()*4)+6;   // 6~9
  if (score >= 70) return Math.floor(Math.random()*5)+4;   // 4~8
  return Math.floor(Math.random()*6)+1;                    // 1~6
}

/* ================================================
   ìš´ì„¸ ì „ì²´ ìƒì„± í•¨ìˆ˜
================================================= */
function generateFortune(name) {
  const mainIdx = Math.floor(Math.random() * mainMessages.length);
  const actionIdx = Math.floor(Math.random() * actionTips.length);
  const warnIdx = Math.floor(Math.random() * warnings.length);

  const [mainText, level] = mainMessages[mainIdx];
  const score = calcScore(level, warnIdx);
  const lucky = calcLucky(score);
  const color = colors[Math.floor(Math.random() * colors.length)];

  return {
    title: `${name ? name + "ë‹˜, " : ""}${mainText}`,
    intro: actionTips[actionIdx] + " " + warnings[warnIdx],
    score,
    lucky,
    color
  };
}

/* ================================================
   DOM ì—°ê²°
================================================= */
const nameInput = document.getElementById("name");
const gender = document.getElementById("gender");
const birthYear = document.getElementById("birthYear");
const birthMonth = document.getElementById("birthMonth");
const birthDay = document.getElementById("birthDay");
const birthTime = document.getElementById("birthTime");

const errorDiv = document.getElementById("error");
const heroNamePrefix = document.getElementById("heroNamePrefix");

const resultSection = document.getElementById("resultSection");
const todayText = document.getElementById("todayText");
const resultTitle = document.getElementById("resultTitle");
const resultIntro = document.getElementById("resultIntro");
const scoreBadge = document.getElementById("scoreBadge");
const luckyBadge = document.getElementById("luckyBadge");
const colorBadge = document.getElementById("colorBadge");
const sectionContainer = document.getElementById("sectionContainer");

/* ================================================
   ì´ë¦„ UI ì—…ë°ì´íŠ¸
================================================= */
nameInput.addEventListener("input", () => {
  heroNamePrefix.textContent = nameInput.value.trim()
    ? `${nameInput.value.trim()}ë‹˜, `
    : "";
});

/* ================================================
   ìƒë…„ì›”ì¼ ì˜µì…˜ ìë™ ìƒì„±
================================================= */
(function initBirthSelects() {
  const now = new Date();
  const thisYear = now.getFullYear();
  for (let y = thisYear; y >= thisYear - 60; y--) {
    birthYear.innerHTML += `<option value="${y}">${y}ë…„</option>`;
  }
  for (let m = 1; m <= 12; m++) {
    birthMonth.innerHTML += `<option value="${m}">${m}ì›”</option>`;
  }
  for (let d = 1; d <= 31; d++) {
    birthDay.innerHTML += `<option value="${d}">${d}ì¼</option>`;
  }
})();

/* ================================================
   ë²„íŠ¼ í´ë¦­ â†’ ìš´ì„¸ ìƒì„±
================================================= */
document.getElementById("seeFortuneBtn").addEventListener("click", () => {

  if (!birthYear.value || !birthMonth.value || !birthDay.value) {
    errorDiv.textContent = "ìƒë…„ì›”ì¼ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.";
    return;
  }
  if (!gender.value) {
    errorDiv.textContent = "ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.";
    return;
  }
  errorDiv.textContent = "";

  const name = nameInput.value.trim();

  const fortune = generateFortune(name);

  todayText.textContent = formatToday();
  resultTitle.textContent = fortune.title;
  resultIntro.textContent = fortune.intro;
  scoreBadge.textContent = fortune.score + "ì ";
  luckyBadge.textContent = fortune.lucky;
  colorBadge.innerHTML = formatColorLabel(fortune.color);

  resultSection.style.display = "block";
  resultSection.scrollIntoView({ behavior: "smooth", block:"start" });
});
</script>

</body>
</html>
