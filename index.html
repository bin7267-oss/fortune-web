<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì˜¤ëŠ˜ì˜ ìš´ì„¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* ===== ì „ì²´ ê³µí†µ ìŠ¤íƒ€ì¼ (ëª¨ë°”ì¼ ìš°ì„ ) ===== */
    :root {
      --neon-lime: #c7ff2e;
      --black: #111111;
      --text-main: #222222;
      --text-sub: #555555;
      --card-bg: #ffffff;
      --badge-bg: #f4f4f4;
      --accent: #00bf6f;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
      background: var(--neon-lime);
      color: var(--text-main);
    }

    .wrap {
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
      padding: 16px 16px 96px;
      position: relative;
    }

    /* ===== í—¤ë”/ë¸Œëœë“œ ì˜ì—­ ===== */
    .top-bar {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      margin-bottom: 16px;
      font-size: 0.8rem;
      font-weight: 500;
    }
    .brand {
      font-weight: 800;
      letter-spacing: 0.02em;
    }

    /* ===== íˆì–´ë¡œ ì˜ì—­ ===== */
    .hero {
      text-align: center;
      margin-top: 8px;
      margin-bottom: 24px;
    }
    .hero-title {
      font-size: 1.4rem;
      font-weight: 700;
      line-height: 1.4;
      margin-bottom: 16px;
    }
    .hero-title span {
      font-weight: 800;
    }
    .clover {
      font-size: 80px;
      line-height: 1;
      margin-bottom: 8px;
    }
    .hero-sub {
      font-size: 0.9rem;
      color: #333333;
    }

    /* ===== ì¹´ë“œ ê³µí†µ ===== */
    .card {
      background: var(--card-bg);
      border-radius: 18px;
      padding: 18px 16px 16px;
      box-shadow: 0 8px 18px rgba(0,0,0,0.08);
      margin-bottom: 18px;
    }

    .card-title {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 4px;
    }
    .card-desc {
      font-size: 0.85rem;
      color: var(--text-sub);
      margin-bottom: 14px;
    }

    label {
      display: block;
      font-size: 0.8rem;
      margin-bottom: 4px;
      color: #666666;
    }

    .field {
      margin-bottom: 10px;
    }

    input, select {
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid #dddddd;
      font-size: 0.9rem;
      outline: none;
      background: #fafafa;
    }
    input:focus, select:focus {
      border-color: var(--accent);
      background: #ffffff;
    }
    input::placeholder {
      color: #aaaaaa;
    }

    /* ìƒë…„ì›”ì¼ 3ë¶„í•  */
    .birth-row {
      display: flex;
      gap: 8px;
    }
    .birth-row select {
      flex: 1;
    }

    .checkbox-row {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-top: 6px;
      font-size: 0.8rem;
      color: var(--text-sub);
    }

    .error {
      font-size: 0.8rem;
      color: #e53935;
      min-height: 1.2em;
      margin-top: 4px;
    }

    /* ===== ê²°ê³¼ ì¹´ë“œ ===== */
    .result {
      margin-top: 8px;
      display: none;
    }

    .result-card {
      background: var(--card-bg);
      border-radius: 18px;
      padding: 18px 16px 20px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.12);
      margin-bottom: 16px;
    }

    .date-text {
      font-size: 0.8rem;
      color: var(--text-sub);
      margin-bottom: 6px;
    }

    .result-headline {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .result-intro {
      font-size: 0.9rem;
      color: var(--text-sub);
      line-height: 1.5;
      margin-bottom: 14px;
    }

    .badge-row {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
    }
    .badge {
      flex: 1;
      padding: 8px 10px;
      border-radius: 12px;
      background: var(--badge-bg);
      font-size: 0.8rem;
      text-align: center;
    }
    .badge-title {
      display: block;
      margin-bottom: 2px;
      color: var(--text-sub);
    }
    .badge-value {
      font-weight: 700;
      line-height: 1.3;
    }

    .section {
      background: var(--card-bg);
      border-radius: 18px;
      padding: 14px 14px 12px;
      box-shadow: 0 6px 14px rgba(0,0,0,0.06);
      margin-bottom: 10px;
      font-size: 0.9rem;
      line-height: 1.5;
    }
    .section-title {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 0.9rem;
    }
    .section-body {
      font-size: 0.85rem;
      color: var(--text-sub);
    }

    .disclaimer {
      font-size: 0.75rem;
      color: #444444;
      text-align: center;
      margin-top: 8px;
      opacity: 0.8;
    }

    /* ===== í•˜ë‹¨ ê³ ì • ë²„íŠ¼ ===== */
    .bottom-bar {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      padding: 10px 16px 18px;
      background: linear-gradient(to top, rgba(0,0,0,0.28), transparent);
      pointer-events: none;
    }
    .bottom-inner {
      max-width: 480px;
      margin: 0 auto;
      pointer-events: auto;
    }
    .main-btn {
      width: 100%;
      border: none;
      border-radius: 999px;
      padding: 14px 16px;
      background: #000000;
      color: #ffffff;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
    }
    .main-btn:active {
      transform: translateY(1px);
      opacity: 0.9;
    }

    @media (min-width: 768px) {
      .hero-title {
        font-size: 1.6rem;
      }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- í—¤ë” -->
    <header class="top-bar">
      <div class="brand">IfNewWorld</div>
    </header>

    <!-- íˆì–´ë¡œ / ì¸ì‚¬ -->
    <section class="hero">
      <div class="hero-title">
        <span id="heroNamePrefix"></span>ì˜¤ëŠ˜ë„ í–‰ìš´ì´ ê°€ë“í•˜ê¸¸!
      </div>
      <div class="clover">ğŸ€</div>
      <div class="hero-sub">ê°„ë‹¨í•œ ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´ ì˜¤ëŠ˜ í•˜ë£¨ì˜ ìš´ì„¸ì™€ ì‘ì€ ì¡°ì–¸ì„ ì•Œë ¤ì¤ë‹ˆë‹¤.</div>
    </section>

    <!-- ì…ë ¥ ì¹´ë“œ -->
    <section class="card">
      <div class="card-title">ì •í™•í•œ ìš´ì„¸ë¥¼ ìœ„í•´<br><span id="formNamePrefix">ë‹¹ì‹ </span>ì„ ë” ì•Œê³  ì‹¶ì–´ìš”</div>
      <div class="card-desc">
        ì„±ë³„, ìƒë…„ì›”ì¼, íƒœì–´ë‚œ ì‹œê°„ì„ ê¸°ë°˜ìœ¼ë¡œ ì˜¤ëŠ˜ì˜ íë¦„ì„ ê°„ë‹¨íˆ ë¶„ì„í•©ë‹ˆë‹¤.
        ì…ë ¥í•œ ì •ë³´ëŠ” ìš´ì„¸ ê³„ì‚° ìš©ë„ë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
      </div>

      <div class="field">
        <label for="name">ì´ë¦„</label>
        <input type="text" id="name" placeholder="ì˜ˆ: ì§€í˜œë¹ˆ" />
      </div>

      <div class="field">
        <label for="gender">ì„±ë³„</label>
        <select id="gender">
          <option value="">ì„ íƒí•˜ì„¸ìš”</option>
          <option value="male">ë‚¨ì„±</option>
          <option value="female">ì—¬ì„±</option>
          <option value="other">ê¸°íƒ€</option>
        </select>
      </div>

      <!-- ìƒë…„ì›”ì¼: ì—°/ì›”/ì¼ ì…€ë ‰íŠ¸ -->
      <div class="field">
        <label>ìƒë…„ì›”ì¼</label>
        <div class="birth-row">
          <select id="birthYear">
            <option value="">ì—°ë„</option>
          </select>
          <select id="birthMonth">
            <option value="">ì›”</option>
          </select>
          <select id="birthDay">
            <option value="">ì¼</option>
          </select>
        </div>
      </div>

      <div class="field">
        <label for="birthTime">íƒœì–´ë‚œ ì‹œê°„</label>
        <select id="birthTime">
          <option value="">ëª¨ë¦„ / ê¸°ì–µ ì•ˆ ë‚¨</option>
          <option value="0">00ì‹œ</option>
          <option value="1">01ì‹œ</option>
          <option value="2">02ì‹œ</option>
          <option value="3">03ì‹œ</option>
          <option value="4">04ì‹œ</option>
          <option value="5">05ì‹œ</option>
          <option value="6">06ì‹œ</option>
          <option value="7">07ì‹œ</option>
          <option value="8">08ì‹œ</option>
          <option value="9">09ì‹œ</option>
          <option value="10">10ì‹œ</option>
          <option value="11">11ì‹œ</option>
          <option value="12">12ì‹œ</option>
          <option value="13">13ì‹œ</option>
          <option value="14">14ì‹œ</option>
          <option value="15">15ì‹œ</option>
          <option value="16">16ì‹œ</option>
          <option value="17">17ì‹œ</option>
          <option value="18">18ì‹œ</option>
          <option value="19">19ì‹œ</option>
          <option value="20">20ì‹œ</option>
          <option value="21">21ì‹œ</option>
          <option value="22">22ì‹œ</option>
          <option value="23">23ì‹œ</option>
        </select>
      </div>

      <div class="checkbox-row">
        <input type="checkbox" id="noTime" />
        <label for="noTime">íƒœì–´ë‚œ ì‹œê°„ì„ ì˜ ëª¨ë¥´ê² ì–´ìš”</label>
      </div>

      <div id="error" class="error"></div>
    </section>

    <!-- ê²°ê³¼ ì˜ì—­ -->
    <section class="result" id="resultSection">
      <div class="result-card">
        <div class="date-text" id="todayText"></div>
        <div class="result-headline" id="resultTitle"></div>
        <div class="result-intro" id="resultIntro"></div>

        <div class="badge-row">
          <div class="badge">
            <span class="badge-title">ì˜¤ëŠ˜ì˜ ì ìˆ˜</span>
            <span class="badge-value" id="scoreBadge"></span>
          </div>
          <div class="badge">
            <span class="badge-title">í–‰ìš´ì˜ ìˆ«ì</span>
            <span class="badge-value" id="luckyBadge"></span>
          </div>
          <div class="badge">
            <span class="badge-title">ì¶”ì²œ ìƒ‰ìƒ</span>
            <span class="badge-value" id="colorBadge"></span>
          </div>
        </div>
      </div>

      <!-- ì„¸ë¶€ ì¡°ì–¸ ë¸”ë¡ -->
      <div id="sectionContainer"></div>

      <div class="disclaimer">
        ë³¸ ìš´ì„¸ëŠ” ì˜¤ë½ ë° ìê¸° ì„±ì°°ì„ ìœ„í•œ ì°¸ê³ ìš©ì´ë©°,
        ì‹¤ì œ íˆ¬ìÂ·ì˜ì‚¬ê²°ì •ì˜ ê·¼ê±°ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šê¸°ë¥¼ ê¶Œì¥í•¨.
      </div>
    </section>
  </div>

  <!-- í•˜ë‹¨ ê³ ì • ë²„íŠ¼ -->
  <div class="bottom-bar">
    <div class="bottom-inner">
      <button class="main-btn" id="seeFortuneBtn">ì˜¤ëŠ˜ì˜ ìš´ì„¸ ë³´ê¸°</button>
    </div>
  </div>

  <script>
    /* ===== ë‚ ì§œ í‘œê¸° ===== */
    function formatTodayKorean() {
      const now = new Date();
      const year = now.getFullYear();
      const month = now.getMonth() + 1;
      const date = now.getDate();
      const weekdays = ["ì¼", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "];
      const day = weekdays[now.getDay()];
      return year + "ë…„ " + month + "ì›” " + date + "ì¼ " + day + "ìš”ì¼";
    }

    /* ===== ì‹œë“œ ìƒì„± (í•­ìƒ ê°™ì€ ì…ë ¥ â†’ ê°™ì€ ê²°ê³¼) ===== */
    function makeSeed(birthStr, gender, birthTime) {
      const digits = birthStr.replace(/-/g, "");
      let sum = 0;
      for (let ch of digits) sum += Number(ch);

      let genderVal = 0;
      if (gender === "male") genderVal = 3;
      else if (gender === "female") genderVal = 7;
      else if (gender === "other") genderVal = 5;

      const timeVal = birthTime !== "" ? Number(birthTime) : 0;
      return sum * 13 + genderVal * 17 + timeVal * 19;
    }

    /* ===== ìƒ‰ìƒ ì´ë¦„ ì¤„ë°”ê¿ˆ: ë„ì–´ì“°ê¸° ê¸°ì¤€ ìš°ì„  ===== */
    function formatColorLabel(name) {
      if (name.includes(" ")) {
        const parts = name.split(" ");
        const last = parts.pop();
        return parts.join(" ") + "<br>" + last;
      }
      const len = name.length;
      if (len <= 4) return name;
      const first = name.slice(0, len - 2);
      const last = name.slice(len - 2);
      return first + "<br>" + last;
    }

    /* ===== ìš´ì„¸ ë©”ì‹œì§€ ë°ì´í„° ===== */

    // ë©”ì¸ í—¤ë“œë¼ì¸ í›„ë³´ (í†¤: high / mid / calm)
    const headlineOptions = [
      { tone: "high", text: "ì§‘ì¤‘ë ¥ê³¼ ì‹¤í–‰ë ¥ì´ ì‚´ì•„ë‚˜ëŠ” í•˜ë£¨ì…ë‹ˆë‹¤." },
      { tone: "high", text: "ì§€ê¸ˆê¹Œì§€ ìŒ“ì•„ì˜¨ ë…¸ë ¥ì´ ëˆˆì— ë³´ì´ê¸° ì‹œì‘í•˜ëŠ” ë‚ ì…ë‹ˆë‹¤." },
      { tone: "high", text: "ê³¼ê°í•œ ì„ íƒì´ ì¢‹ì€ ê²°ê³¼ë¡œ ì´ì–´ì§€ê¸° ì‰¬ìš´ í•˜ë£¨ì…ë‹ˆë‹¤." },

      { tone: "mid", text: "í•´ì•¼ í•  ì¼ë“¤ì˜ ìœ¤ê³½ì´ ë¹„êµì  ë˜ë ·í•˜ê²Œ ë³´ì´ëŠ” ë‚ ì…ë‹ˆë‹¤." },
      { tone: "mid", text: "ìƒˆë¡œìš´ ì‹œë„ì™€ ì•ˆì •ì ì¸ ì¼ìƒì´ ê· í˜•ì„ ì´ë£¨ëŠ” í•˜ë£¨ì…ë‹ˆë‹¤." },
      { tone: "mid", text: "í° íŒŒë™ì€ ì—†ì§€ë§Œ, ì°¨ë¶„íˆ ì„±ê³¼ë¥¼ ìŒ“ê¸° ì¢‹ì€ íë¦„ì…ë‹ˆë‹¤." },

      { tone: "calm", text: "ë§ˆìŒì˜ ë¦¬ë“¬ì„ ì •ë¦¬í•˜ê¸° ì¢‹ì€ ì •ëˆì˜ í•˜ë£¨ì…ë‹ˆë‹¤." },
      { tone: "calm", text: "ì†ë„ë¥¼ ì ì‹œ ëŠ¦ì¶”ê³  ë‚˜ë¥¼ ì •ë¹„í•˜ê¸° ì¢‹ì€ íƒ€ì´ë°ì…ë‹ˆë‹¤." },
      { tone: "calm", text: "ë¬´ë¦¬í•˜ê¸°ë³´ë‹¤ëŠ” íë¦„ì„ ì ê²€í•˜ë©° ê°€ëŠ” í¸ì´ ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤." }
    ];

    // ì¸íŠ¸ë¡œ ë¬¸ë‹¨ (í†¤ë³„)
    const introByTone = {
      high: [
        "ê³„íšë§Œ ì„¸ìš°ê³  ë¯¸ë¤„ë‘ì—ˆë˜ ì¼ì„ ì‹¤ì œ í–‰ë™ìœ¼ë¡œ ì˜®ê¸°ê¸°ì— ì¢‹ì€ íƒ€ì´ë°ì…ë‹ˆë‹¤. ë¨¸ë¦¿ì†ì—ì„œë§Œ ëŒë˜ ìƒê°ë“¤ì„ í˜„ì‹¤ë¡œ êº¼ë‚´ ë†“ìœ¼ë©´, ìƒê°ë³´ë‹¤ ë¹ ë¥´ê²Œ ì§„ì „ì´ ì¼ì–´ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ì—ë„ˆì§€ê°€ ë¹„êµì  ë˜ë ·í•˜ê²Œ ì‚´ì•„ë‚˜ëŠ” ë‚ ì…ë‹ˆë‹¤. ì¤‘ìš”í•œ ê²°ì •ì„ í•˜ê±°ë‚˜ ë„ì „ì ì¸ ì¼ì„ ì‹œì‘í•˜ê¸°ì— ìœ ë¦¬í•œ íë¦„ì´ë‹ˆ, ì˜¤ëŠ˜ ë– ì˜¤ë¥´ëŠ” ì•„ì´ë””ì–´ë¥¼ ê°€ë³ê²Œë¼ë„ ì‹¤í—˜í•´ ë³´ì„¸ìš”.",
        "ì£¼ë³€ì˜ ê¸°ëŒ€ë³´ë‹¤ ìŠ¤ìŠ¤ë¡œì˜ ì¶”ì§„ë ¥ì´ ë” í¬ê²Œ ì‘ìš©í•˜ëŠ” í•˜ë£¨ì…ë‹ˆë‹¤. ìŠ¤ìŠ¤ë¡œë¥¼ ë¯¿ê³  í•œ ê±¸ìŒì„ ë‚´ë”›ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ì¢‹ì€ ë³€í™”ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
      ],
      mid: [
        "ê¸‰ê²©í•œ ë³€í™”ë³´ë‹¤ëŠ” ì•ˆì •ì ì¸ ì§„í–‰ì— ì–´ìš¸ë¦¬ëŠ” ë‚ ì…ë‹ˆë‹¤. ì´ë¯¸ ì§„í–‰ ì¤‘ì¸ ì¼ë“¤ì„ ì •ë¦¬í•˜ê³  ë§ˆë¬´ë¦¬í•˜ëŠ” ë° ì§‘ì¤‘í•˜ë©´ ë¶€ë‹´ì´ ëˆˆì— ë„ê²Œ ì¤„ì–´ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "í•´ì•¼ í•  ì¼ê³¼ ì‰¬ì–´ì•¼ í•  íƒ€ì´ë°ì˜ ê²½ê³„ê°€ ë¹„êµì  ë˜ë ·í•˜ê²Œ ë³´ì´ëŠ” í•˜ë£¨ì…ë‹ˆë‹¤. ë¬´ë¦¬í•´ì„œ ì†ë„ë¥¼ ëŒì–´ì˜¬ë¦¬ê¸°ë³´ë‹¤, ì˜¤ëŠ˜ì€ íë¦„ì„ íƒ€ëŠ” ìª½ì´ ë” íš¨ìœ¨ì ì…ë‹ˆë‹¤.",
        "ì–´ëŠ í•œìª½ìœ¼ë¡œ ì¹˜ìš°ì¹˜ê¸°ë³´ë‹¤ëŠ” ê· í˜• ì¡íŒ ì„ íƒì´ í•„ìš”í•œ ë‚ ì…ë‹ˆë‹¤. ë„ˆë¬´ ê·¹ë‹¨ì ì¸ íŒë‹¨ë³´ë‹¤ëŠ”, ì§€ê¸ˆ ë‹¹ì¥ ì‹¤ì²œ ê°€ëŠ¥í•œ ì„ íƒì§€ë¥¼ ìš°ì„ ìœ¼ë¡œ ë‘ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤."
      ],
      calm: [
        "ê°ì •ì˜ íŒŒë„ê°€ í¬ì§€ëŠ” ì•Šì§€ë§Œ, ì‚¬ì†Œí•œ í”¼ë¡œê°ì´ ìŒ“ì—¬ ìˆì„ ìˆ˜ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤. ì–µì§€ë¡œ í…ì…˜ì„ ëŒì–´ì˜¬ë¦¬ê¸°ë³´ë‹¤ ì˜¤ëŠ˜ì€ ë‚˜ë¥¼ ë‹¤ë…ì´ëŠ” ë° ì´ˆì ì„ ë§ì¶”ëŠ” í¸ì´ ì¢‹ìŠµë‹ˆë‹¤.",
        "ê¸°ì¡´ ê³„íšì„ ì¬ì •ë¹„í•˜ê³ , ì•ìœ¼ë¡œ ì–´ë–»ê²Œ ì›€ì§ì¼ì§€ ì¤‘ì¥ê¸°ì ìœ¼ë¡œ ê·¸ë ¤ë³´ê¸° ì¢‹ì€ í•˜ë£¨ì…ë‹ˆë‹¤. ì˜¤ëŠ˜ ë– ì˜¬ë¦° ìƒê°ì´ ë‚´ì¼ ì´í›„ì˜ ë°©í–¥ì„±ì„ ë°”ê¾¸ëŠ” íŒíŠ¸ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ë‹¹ì¥ ì„±ê³¼ì— ì§‘ì°©í•˜ê¸°ë³´ë‹¤ëŠ”, í‹€ì„ ì •ë¦¬í•˜ê³  ë¦¬ë“¬ì„ ë§Œë“œëŠ” ë° ì§‘ì¤‘í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤. ì˜¤ëŠ˜ì˜ ì‘ì€ ì ê²€ì´ ë‹¤ìŒ ì£¼ì˜ ë¶€ë‹´ì„ ë§ì´ ëœì–´ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
      ]
    };

    // ì„¸ë¶€ ì„¹ì…˜ í›„ë³´ (ì œëª© + ë‚´ìš©) â€” 15ì¤„ ì´ìƒ ë‚˜ì˜¤ë„ë¡ ì¶©ë¶„íˆ ê¸¸ê²Œ êµ¬ì„±
    const sectionPool = [
      {
        title: "ìš°ì„ ìˆœìœ„ ì •í•˜ê¸°",
        body:
          "ì˜¤ëŠ˜ì€ ëª¨ë“  ì¼ì„ í•œ ë²ˆì— í•´ê²°í•˜ë ¤ í•˜ê¸°ë³´ë‹¤, ê°€ì¥ ì¤‘ìš”í•œ ì¼ í•œë‘ ê°€ì§€ì— ì—ë„ˆì§€ë¥¼ ì§‘ì¤‘í•˜ëŠ” í¸ì´ ì¢‹ìŠµë‹ˆë‹¤. í•  ì¼ ëª©ë¡ì„ ì ì–´ë³´ê³  â€˜ì§€ê¸ˆ ë°˜ë“œì‹œ í•´ì•¼ í•˜ëŠ” ê²ƒâ€™ë¶€í„° ì²´í¬í•´ ë³´ì„¸ìš”. ì‘ì€ í•­ëª©ì´ë¼ë„ í•˜ë‚˜ì”© ì§€ì›Œ ë‚˜ê°€ë©´ ì‹¬ë¦¬ì ì¸ ë¶€ë‹´ì´ ëˆˆì— ë„ê²Œ ê°€ë²¼ì›Œì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
      },
      {
        title: "ëª°ì… íŒ",
        body:
          "25ë¶„ ì§‘ì¤‘ í›„ 5ë¶„ ì‰¬ëŠ” ì‹ìœ¼ë¡œ ì§§ê²Œ ëŠì–´ì„œ ì¼í•˜ë©´ íš¨ìœ¨ì´ ë†’ì•„ì§‘ë‹ˆë‹¤. íœ´ëŒ€í° ì•Œë¦¼ì„ ì ì‹œ êº¼ë‘ê±°ë‚˜, ì‘ì—…ì— í•„ìš” ì—†ëŠ” íƒ­ì„ ì •ë¦¬í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ëª°ì…ë„ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¼ í•œ ì”ì„ ê³ì— ë‘ê³  í˜¸í¡ì„ ì²œì²œíˆ ê³ ë¥´ë©° ì‹œì‘í•´ ë³´ì„¸ìš”."
      },
      {
        title: "ê´€ê³„ & ì†Œí†µ",
        body:
          "ì˜¤ëŠ˜ì€ ë§íˆ¬ì™€ í‘œí˜„ ë°©ì‹ì— ì¡°ê¸ˆë§Œ ë” ì‹ ê²½ì„ ì“°ë©´ ì¢‹ìŠµë‹ˆë‹¤. ê°™ì€ ë‚´ìš©ì´ë¼ë„ ë¶€ë“œëŸ½ê²Œ ì „ë‹¬í•˜ë©´ ë¶ˆí•„ìš”í•œ ì˜¤í•´ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰ê°ì ì¸ ë‹µë³€ë³´ë‹¤ëŠ”, í•œìˆ¨ ê³ ë¥´ê³  ë‹¤ì‹œ ì½ì–´ë³¸ ë’¤ ë³´ë‚´ëŠ” ë©”ì‹œì§€ê°€ ê´€ê³„ ìš´ì„ ë” ì¢‹ê²Œ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
      },
      {
        title: "ì»¨ë””ì…˜ ê´€ë¦¬",
        body:
          "ëª¸ê³¼ ë§ˆìŒì˜ ì—ë„ˆì§€ê°€ ë‹¤ì†Œ ì—‡ê°ˆë¦´ ìˆ˜ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤. í”¼ê³¤í•¨ì´ ëŠê»´ì§„ë‹¤ë©´, ë¬´ë¦¬í•´ì„œ ë²„í‹°ê¸°ë³´ë‹¤ ì§§ì€ ìŠ¤íŠ¸ë ˆì¹­ì´ë‚˜ ê°€ë²¼ìš´ ì‚°ì±…ìœ¼ë¡œ íë¦„ì„ ë°”ê¿” ë³´ì„¸ìš”. ìˆ˜ë©´ ë¦¬ë“¬ì´ ííŠ¸ëŸ¬ì ¸ ìˆë‹¤ë©´ ì˜¤ëŠ˜ë§Œí¼ì€ ì ë“œëŠ” ì‹œê°„ì„ ì¡°ê¸ˆ ì•ë‹¹ê¸°ëŠ” ê²ƒë„ ì¢‹ìŠµë‹ˆë‹¤."
      },
      {
        title: "ê¸ˆì „ & ì†Œë¹„ìš´",
        body:
          "ì¦‰í¥ì ì¸ ì§€ì¶œë³´ë‹¤ëŠ” ê¼­ í•„ìš”í•œ ê³³ì— ì‚¬ìš©í–ˆì„ ë•Œ ë§Œì¡±ë„ê°€ ë†’ì•„ì§€ëŠ” ë‚ ì…ë‹ˆë‹¤. ë‹¹ì¥ í•„ìš”í•˜ì§€ ì•Šì€ ë¬¼ê±´ì€ â€˜ì¥ë°”êµ¬ë‹ˆì— ë„£ì–´ë‘ê³  ë‚´ì¼ ë‹¤ì‹œ ë³´ê¸°â€™ ì „ëµì´ ë„ì›€ì´ ë©ë‹ˆë‹¤. ëŒ€ì‹  ë‚˜ì˜ ì„±ì¥ì´ë‚˜ ê±´ê°•ì„ ìœ„í•œ íˆ¬ìì—ëŠ” ì ë‹¹í•œ ë¹„ìš©ì„ ì¨ë„ ê´œì°®ì€ íë¦„ì…ë‹ˆë‹¤."
      },
      {
        title: "ì¼Â·í•™ì—… ìš´",
        body:
          "ë””í…Œì¼ì„ ì¡ëŠ” ë° ìœ ë¦¬í•œ í•˜ë£¨ì…ë‹ˆë‹¤. ë‚¨ë“¤ì´ ì§€ë‚˜ì¹  ë§Œí•œ ë¶€ë¶„ì—ì„œ ì¥ì ì„ ë°œê²¬í•˜ê±°ë‚˜ ì˜¤ë¥˜ë¥¼ ì°¾ì•„ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™„ë²½ì£¼ì˜ì— ë¹ ì§€ì§€ ì•ŠëŠ” ì„ ì—ì„œ, ì¤‘ìš”í•œ ë¬¸ì„œë‚˜ ê²°ê³¼ë¬¼ì„ í•œ ë²ˆ ë” ê²€í† í•´ ë³´ë©´ ì¢‹ì€ í‰ê°€ë¥¼ ë°›ì„ í™•ë¥ ì´ ë†’ìŠµë‹ˆë‹¤."
      },
      {
        title: "ì•„ì´ë””ì–´ & ì˜ê°",
        body:
          "ì¼ìƒì˜ ì‘ì€ ì¥ë©´ì—ì„œ ìƒˆë¡œìš´ ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥´ê¸° ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤. í‰ì†Œ ìì£¼ ë³´ë˜ ê³µê°„ë„ ë‹¤ë¥¸ ì‹œì„ ìœ¼ë¡œ ë°”ë¼ë³´ë©´ ìƒˆë¡œìš´ ê¸°íšì˜ ì‹¤ë§ˆë¦¬ê°€ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë– ì˜¤ë¥¸ ìƒê°ì„ ë©”ëª¨í•´ ë‘ë©´ ë‚˜ì¤‘ì— í”„ë¡œì íŠ¸ë‚˜ ì½˜í…ì¸ ë¡œ ì—°ê²°ë  ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤."
      },
      {
        title: "ê°ì • ë‹¤ë£¨ê¸°",
        body:
          "ê´œì°®ë‹¤ê³  ë„˜ê²¼ë˜ ê°ì •ì´ ì˜¤ëŠ˜ ë¬¸ë“ ë– ì˜¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì–µì§€ë¡œ ëˆŒëŸ¬ë‘ê¸°ë³´ë‹¤, â€˜ì•„ ê·¸ë•Œ ì´ëŸ° ê¸°ë¶„ì´ì—ˆì§€â€™ í•˜ê³  ì¸ì •í•´ ì£¼ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ë§ˆìŒì´ í•œê²° ê°€ë²¼ì›Œì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•„ìš”í•œ ê²½ìš° ë¯¿ì„ ìˆ˜ ìˆëŠ” ì‚¬ëŒì—ê²Œ ê°€ë³ê²Œ í„¸ì–´ë†“ëŠ” ê²ƒë„ ë„ì›€ì´ ë©ë‹ˆë‹¤."
      },
      {
        title: "ì˜¤ëŠ˜ì˜ í•œ ì¤„ ê°€ì´ë“œ",
        body:
          "ì™„ë²½ì„ ëª©í‘œë¡œ í•˜ê¸°ë³´ë‹¤, ì˜¤ëŠ˜ í•  ìˆ˜ ìˆëŠ” ë§Œí¼ë§Œ ì„±ì‹¤í•˜ê²Œ í•´ë‚´ë©´ ì¶©ë¶„í•©ë‹ˆë‹¤. 70%ì˜ ì™„ì„±ë„ë¼ë„ ë§ˆë¬´ë¦¬ëœ ì¼ í•˜ë‚˜ê°€, ë¨¸ë¦¿ì†ì„ ë³µì¡í•˜ê²Œ ë§Œë“¤ë˜ ì—¬ëŸ¬ ê±±ì •ì„ í•œ ë²ˆì— ì •ë¦¬í•´ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
      },
      {
        title: "ì…€í”„ ì¼€ì–´ í¬ì¸íŠ¸",
        body:
          "ì˜¤ëŠ˜ í•˜ë£¨ ìˆ˜ê³ í•œ ë‚˜ë¥¼ ìœ„í•´ ì‘ì€ ì„ ë¬¼ì„ ì¤€ë¹„í•´ ë³´ì„¸ìš”. ì¢‹ì•„í•˜ëŠ” ìŒì‹ í•œ ê°€ì§€, ë”°ëœ»í•œ ì°¨ í•œ ì”, ì§§ì€ ì‚°ì±…, ì¢‹ì•„í•˜ëŠ” ì˜ìƒ í•œ í¸ì´ë¼ë„ ì¢‹ìŠµë‹ˆë‹¤. â€˜ì´ ì •ë„ë©´ ì˜¤ëŠ˜ë„ ì˜ ì‚´ì•˜ë‹¤â€™ë¼ëŠ” ë§ˆìŒì´ ë“¤ ìˆ˜ ìˆë„ë¡ ë‚˜ ìì‹ ì—ê²Œ ì¹œì ˆí•˜ê²Œ ëŒ€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤."
      }
    ];

    // ì¶”ì²œ ìƒ‰ìƒ í›„ë³´
    const colorOptions = [
      "ì°¨ë¶„í•œ ë² ì´ì§€",
      "í¬ë ˆìŠ¤íŠ¸ ê·¸ë¦°",
      "ë¼ì„ ê·¸ë¦°",
      "ì•„ì´ë³´ë¦¬ í™”ì´íŠ¸",
      "ìƒŒë“œ ë² ì´ì§€",
      "ë¸Œë¦­ ì˜¤ë Œì§€",
      "ìŠ¤ëª¨í¬ ë¸”ë£¨"
    ];

    /* ===== ì ìˆ˜ ê³„ì‚°: í†¤ì— ë§ê²Œ ë²”ìœ„ ì¡°ì • ===== */
    function calcScore(tone, seed) {
      let min, max;
      if (tone === "high") {
        min = 82; max = 97;
      } else if (tone === "mid") {
        min = 72; max = 90;
      } else {
        min = 64; max = 84;
      }
      const range = max - min + 1;
      return min + (seed % range);
    }

    /* ===== í–‰ìš´ì˜ ìˆ«ì: ì ìˆ˜ì™€ ì—°ë™ ===== */
    function calcLucky(score, seed) {
      if (score >= 90) {
        return 8 + (seed % 3);      // 8~10
      } else if (score >= 80) {
        return 6 + (seed % 4);      // 6~9
      } else if (score >= 70) {
        return 4 + (seed % 5);      // 4~8
      } else {
        return 1 + (seed % 6);      // 1~6
      }
    }

    /* ===== ì‹œë“œ ê¸°ë°˜ ì„ íƒ í•¨ìˆ˜ (ê°™ì€ ì…ë ¥ â†’ í•­ìƒ ê°™ì€ ì¡°í•©) ===== */
    function pickFrom(arr, seedOffset) {
      const idx = seedOffset % arr.length;
      return arr[idx];
    }

    /* ===== ì „ì²´ ìš´ì„¸ ìƒì„± ===== */
    function generateFortune(seed, name) {
      // í†¤ ê²°ì •
      const toneSeed = seed % 100;
      let tone = "mid";
      if (toneSeed >= 70) tone = "high";
      else if (toneSeed < 40) tone = "calm";

      // í—¤ë“œë¼ì¸ & ì¸íŠ¸ë¡œ
      const toneHeadlines = headlineOptions.filter(h => h.tone === tone);
      const headlineObj = pickFrom(toneHeadlines, seed);
      const introArr = introByTone[tone];
      const introText = pickFrom(introArr, Math.floor(seed / 7));

      // ì ìˆ˜/í–‰ìš´/ìƒ‰ìƒ
      const score = calcScore(tone, seed);
      const lucky = calcLucky(score, Math.floor(seed / 11));
      const colorName = pickFrom(colorOptions, Math.floor(seed / 13));

      // ì„¹ì…˜ 3~4ê°œ ì„ íƒ
      const sections = [];
      const sectionCount = 3 + (seed % 2); // 3 ë˜ëŠ” 4
      const usedIndex = new Set();
      for (let i = 0; i < sectionCount; i++) {
        let tryIdx = (seed + i * 17) % sectionPool.length;
        // ì¤‘ë³µ ë°©ì§€
        while (usedIndex.has(tryIdx)) {
          tryIdx = (tryIdx + 1) % sectionPool.length;
        }
        usedIndex.add(tryIdx);
        sections.push(sectionPool[tryIdx]);
      }

      const namePrefix = name ? name + "ë‹˜, " : "";

      return {
        headline: namePrefix + headlineObj.text,
        intro: introText,
        score,
        lucky,
        colorName,
        sections
      };
    }

    /* ===== DOM ìš”ì†Œ ===== */
    const nameInput = document.getElementById("name");
    const genderSelect = document.getElementById("gender");
    const birthYearSelect = document.getElementById("birthYear");
    const birthMonthSelect = document.getElementById("birthMonth");
    const birthDaySelect = document.getElementById("birthDay");
    const birthTimeSelect = document.getElementById("birthTime");
    const noTimeCheck = document.getElementById("noTime");
    const errorDiv = document.getElementById("error");
    const heroNamePrefix = document.getElementById("heroNamePrefix");
    const formNamePrefix = document.getElementById("formNamePrefix");
    const seeFortuneBtn = document.getElementById("seeFortuneBtn");
    const resultSection = document.getElementById("resultSection");
    const todayText = document.getElementById("todayText");
    const resultTitle = document.getElementById("resultTitle");
    const resultIntro = document.getElementById("resultIntro");
    const scoreBadge = document.getElementById("scoreBadge");
    const luckyBadge = document.getElementById("luckyBadge");
    const colorBadge = document.getElementById("colorBadge");
    const sectionContainer = document.getElementById("sectionContainer");

    /* ===== ì´ë¦„ ì…ë ¥ ì‹œ ìƒë‹¨ ë¬¸êµ¬ ì—…ë°ì´íŠ¸ ===== */
    function updateNameUI() {
      const name = nameInput.value.trim();
      if (name) {
        heroNamePrefix.textContent = name + "ë‹˜, ";
        formNamePrefix.textContent = name + "ë‹˜";
      } else {
        heroNamePrefix.textContent = "";
        formNamePrefix.textContent = "ë‹¹ì‹ ";
      }
    }
    nameInput.addEventListener("input", updateNameUI);

    /* ===== íƒœì–´ë‚œ ì‹œê°„ ì²´í¬ë°•ìŠ¤ ì²˜ë¦¬ ===== */
    noTimeCheck.addEventListener("change", () => {
      if (noTimeCheck.checked) {
        birthTimeSelect.value = "";
        birthTimeSelect.disabled = true;
      } else {
        birthTimeSelect.disabled = false;
      }
    });

    /* ===== ìƒë…„ì›”ì¼ ì…€ë ‰íŠ¸ ì˜µì…˜ ìƒì„± ===== */
    function initBirthSelects() {
      const now = new Date();
      const thisYear = now.getFullYear();
      const startYear = thisYear - 60;

      for (let y = thisYear; y >= startYear; y--) {
        const opt = document.createElement("option");
        opt.value = String(y);
        opt.textContent = y + "ë…„";
        birthYearSelect.appendChild(opt);
      }

      for (let m = 1; m <= 12; m++) {
        const opt = document.createElement("option");
        opt.value = String(m);
        opt.textContent = m + "ì›”";
        birthMonthSelect.appendChild(opt);
      }

      for (let d = 1; d <= 31; d++) {
        const opt = document.createElement("option");
        opt.value = String(d);
        opt.textContent = d + "ì¼";
        birthDaySelect.appendChild(opt);
      }
    }

    /* ===== ë©”ì¸ ë²„íŠ¼: ìš´ì„¸ ë³´ê¸° ===== */
    seeFortuneBtn.addEventListener("click", () => {
      const name = nameInput.value.trim();
      const gender = genderSelect.value;
      const year = birthYearSelect.value;
      const month = birthMonthSelect.value;
      const day = birthDaySelect.value;
      const birthTime = birthTimeSelect.disabled ? "" : birthTimeSelect.value;

      if (!year || !month || !day) {
        errorDiv.textContent = "ìƒë…„ì›”ì¼(ì—°/ì›”/ì¼)ì„ ëª¨ë‘ ì„ íƒí•´ ì£¼ì„¸ìš”.";
        return;
      }
      if (!gender) {
        errorDiv.textContent = "ì„±ë³„ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.";
        return;
      }
      errorDiv.textContent = "";

      const mm = month.padStart(2, "0");
      const dd = day.padStart(2, "0");
      const birthStr = year + "-" + mm + "-" + dd;

      const seed = makeSeed(birthStr, gender, birthTime);
      const fortune = generateFortune(seed, name);

      todayText.textContent = formatTodayKorean();
      resultTitle.textContent = fortune.headline;
      resultIntro.textContent = fortune.intro;
      scoreBadge.textContent = fortune.score + "ì ";
      luckyBadge.textContent = fortune.lucky;
      colorBadge.innerHTML = formatColorLabel(fortune.colorName);

      // ì„¹ì…˜ ë Œë”ë§
      sectionContainer.innerHTML = "";
      fortune.sections.forEach(sec => {
        const div = document.createElement("div");
        div.className = "section";
        div.innerHTML =
          '<div class="section-title">' +
          sec.title +
          '</div><div class="section-body">' +
          sec.body +
          "</div>";
        sectionContainer.appendChild(div);
      });

      resultSection.style.display = "block";
      resultSection.scrollIntoView({ behavior: "smooth", block: "start" });
    });

    // ì´ˆê¸° ì„¤ì •
    initBirthSelects();
    todayText.textContent = formatTodayKorean();
  </script>
</body>
</html>
